!function(t){var c={};function n(I){if(c[I])return c[I].exports;var g=c[I]={i:I,l:!1,exports:{}};return t[I].call(g.exports,g,g.exports,n),g.l=!0,g.exports}n.m=t,n.c=c,n.d=function(t,c,I){n.o(t,c)||Object.defineProperty(t,c,{enumerable:!0,get:I})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,c){if(1&c&&(t=n(t)),8&c)return t;if(4&c&&"object"==typeof t&&t&&t.__esModule)return t;var I=Object.create(null);if(n.r(I),Object.defineProperty(I,"default",{enumerable:!0,value:t}),2&c&&"string"!=typeof t)for(var g in t)n.d(I,g,function(c){return t[c]}.bind(null,g));return I},n.n=function(t){var c=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(c,"a",c),c},n.o=function(t,c){return Object.prototype.hasOwnProperty.call(t,c)},n.p="",n(n.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/js/weatherInformationClass.js\nclass WeatherInformation {\r\n  constructor(weatherInfo) {\r\n    (this.location = weatherInfo.name),\r\n      (this.country = weatherInfo.sys.country);\r\n    (this.date = new Date()),\r\n      (this.temp = weatherInfo.main.temp),\r\n      (this.iconName = weatherInfo.weather[0].main),\r\n      (this.pressure = weatherInfo.main.pressure),\r\n      (this.humidity = weatherInfo.main.humidity),\r\n      (this.windSpped = weatherInfo.wind.speed);\r\n  }\r\n\r\n  setLocation() {\r\n    const locationID = document.getElementsByClassName(\r\n      "headText__location--js"\r\n    )[0];\r\n    locationID.innerHTML = `in ${this.location}, ${this.country}`;\r\n  }\r\n  setDate() {\r\n    const dateID = document.getElementsByClassName("headText__date--js")[0];\r\n    dateID.innerHTML = `Today ${this.date.getDate()}th, ${this.date.toLocaleString(\r\n      "en-EN",\r\n      { month: "long" }\r\n    )}`;\r\n  }\r\n\r\n  setTemp() {\r\n    const tempID = document.getElementsByClassName("headText--degrees-js")[0];\r\n    tempID.innerHTML = `${this.temp.toFixed(1)} Â°C`;\r\n  }\r\n\r\n  setPressure() {\r\n    const pressureID = document.getElementsByClassName(\r\n      "weatherToday__pressure--js"\r\n    )[0];\r\n    pressureID.innerHTML = `${this.pressure} hPa`;\r\n  }\r\n\r\n  setHumidity() {\r\n    const humidityID = document.getElementsByClassName(\r\n      "weatherToday__humidity--js"\r\n    )[0];\r\n    humidityID.innerHTML = `${this.humidity} %`;\r\n  }\r\n\r\n  setWindSpeed() {\r\n    const windSpeedID = document.getElementsByClassName(\r\n      "weatherToday__windSpeed--js"\r\n    )[0];\r\n    windSpeedID.innerHTML = `${this.windSpped} m/s`;\r\n  }\r\n\r\n  setWeatherInformation() {\r\n    this.setLocation();\r\n    this.setDate();\r\n    this.setTemp();\r\n    this.setPressure();\r\n    this.setHumidity();\r\n    this.setWindSpeed();\r\n  }\r\n\r\n  weatherIcon(weather) {\r\n    let currentDate = new Date();\r\n    currentDate = currentDate.getHours();\r\n    switch (weather) {\r\n      case "thunderstorm":\r\n        return "storm.svg";\r\n        break;\r\n      case "Drizzle":\r\n        return "Drizzle.svg";\r\n        break;\r\n      case "Rain":\r\n        return "Rain.svg";\r\n        break;\r\n      case "Snow":\r\n        return "Snowflake.svg";\r\n        break;\r\n      case "Atmosphere":\r\n        return "fog.svg";\r\n        break;\r\n      case "Clear":\r\n        if (currentDate <= 20) {\r\n          return "sun.svg";\r\n          break;\r\n        } else {\r\n          return "moon.svg";\r\n          break;\r\n        }\r\n      case "Clouds":\r\n        return "Clouds.svg";\r\n        break;\r\n    }\r\n  }\r\n\r\n  setImage() {\r\n    const imageID = document.getElementsByClassName("weatherImage--js")[0];\r\n    const weatherName = this.weatherIcon(this.iconName);\r\n    imageID.src = `assets/img/${weatherName}`;\r\n  }\r\n  roundTemp(temp) {\r\n    return Math.round((temp * 100) / 100);\r\n  }\r\n}\r\n\n// CONCATENATED MODULE: ./src/js/chartClass.js\nclass Chart {\r\n    constructor(weatherData, axisXposition) {\r\n      this.axisXposition = axisXposition;\r\n      this.weatherByHour = weatherData;\r\n      this.condition = false;\r\n      this.state = {};\r\n      this.tooltip = document.getElementsByClassName("chartTemp__tooltip")[0];\r\n      this.canvas = document.getElementById("chartTemp__canvas");\r\n      this.ctx = this.canvas.getContext("2d");\r\n      this.button = document.getElementsByClassName("header__search--buttonJS")[0];\r\n    }\r\n  \r\n    canvasDimensions() {\r\n      this.canvas.width = 660;\r\n      this.canvas.height = 309;\r\n    }\r\n  \r\n    blocks(count) {\r\n      return count * 40;\r\n    }\r\n    \r\n    setAxisXposition(averageTemp) {\r\n      if (averageTemp > 0 && averageTemp < 15) {\r\n        this.axisXposition = this.axisXposition / 2 + 20;\r\n      }\r\n      else if (averageTemp < -10) {\r\n        this.axisXposition = 40;\r\n      }\r\n    }\r\n\r\n    drawGrid() {\r\n      let gridX = 40;\r\n      let gridY = 40;\r\n      const cellSize = 40;\r\n      this.ctx.beginPath();\r\n      this.ctx.strokeStyle = "lightgrey";\r\n    \r\n      while (gridX <= this.canvas.width - 20) {\r\n        this.ctx.moveTo(gridX, 20);\r\n        this.ctx.lineTo(gridX, this.canvas.height - 20);\r\n        gridX += cellSize;\r\n      }\r\n      while (gridY <= this.canvas.height - 20) {\r\n        this.ctx.moveTo(20, gridY);\r\n        this.ctx.lineTo(this.canvas.width - 10, gridY);\r\n        gridY += cellSize;\r\n      }\r\n      this.ctx.stroke();\r\n    }\r\n    \r\n    async drawAxis(hours) {\r\n        this.ctx.beginPath();\r\n        this.ctx.strokeStyle = "black";\r\n        this.ctx.moveTo(this.blocks(1), this.blocks(1 / 2));\r\n        this.ctx.lineTo(this.blocks(1), this.blocks(7));\r\n        this.ctx.moveTo(this.blocks(1), this.axisXposition);\r\n        this.ctx.lineTo(this.blocks(16), this.axisXposition);\r\n        \r\n        this.ctx.moveTo(this.blocks(1), this.blocks(7));\r\n        let text = this.axisXposition === 160 ? -15 : (this.axisXposition === 40 ? -30 : 0);\r\n        let textY = this.blocks(7);\r\n        for (let i = 1; i <= 7; i++) {\r\n          this.ctx.strokeText(text, this.blocks(1 / 2), textY);\r\n          textY -= 40;\r\n          text += 5;\r\n        }\r\n        this.ctx.moveTo(this.blocks(2), this.blocks(7));\r\n        let textX = this.blocks(1.9);\r\n              for (let i = 0; i <= 15; i++) {\r\n          this.ctx.strokeText(hours[i], textX, this.blocks(7.5));\r\n          textX += 40;\r\n        }\r\n        this.ctx.stroke();\r\n      \r\n      \r\n      \r\n    \r\n\r\n    }\r\n    timestampToTime(stamp) {\r\n      let date = new Date(stamp * 1000);\r\n      return date.getHours();\r\n    }\r\n    \r\n    mapAndFilter(tempArray) {\r\n      tempArray = tempArray.map((el) => this.timestampToTime(el));\r\n      tempArray = tempArray.filter((el) => el % 2 == 0);\r\n      return tempArray;\r\n    }\r\n    \r\n    temperatureToChartCoords(temp){\r\n      let temperature = temp.map((el) => el / 5);\r\n      temperature = temperature.slice(0,15);\r\n      return temperature;\r\n    }\r\n    \r\n    getHoursCoords() {\r\n      let hourOfTemp = [...Array(17).keys()]\r\n      hourOfTemp = hourOfTemp.slice(2, 17);\r\n    \r\n      return hourOfTemp;\r\n    }\r\n    \r\n    getAverageTemp(temperature) {\r\n      return (temperature.reduce((a,b) => (a+b)) / temperature.length).toFixed(1);\r\n    }\r\n\r\n    drawChart(temperature) {\r\n      const tempHours = this.getHoursCoords();\r\n      let i = 1;\r\n      const context = this.ctx\r\n      const block = this.blocks.bind(this);\r\n      const axisXposition = this.axisXposition;\r\n      function animation() {\r\n        if (i <= temperature.length) {\r\n          window.requestAnimationFrame(animation);\r\n        }\r\n        context.strokeStyle = "#FFE74A";\r\n        context.lineWidth = 3;\r\n        context.beginPath();\r\n        context.moveTo(block(tempHours[i-1]), axisXposition - block(temperature[i-1]));\r\n        context.arc(block(tempHours[i-1]), axisXposition - block(temperature[i-1]), 3, 0, Math.PI * 2, true);\r\n        context.lineTo(block(tempHours[i]), axisXposition - block(temperature[i]));\r\n        context.stroke();\r\n        i++;\r\n      }\r\n      animation();\r\n    }\r\n    \r\n    async waitForGrid(ms) {\r\n      return new Promise(r => setTimeout(r, ms));\r\n    }\r\n    \r\n    getMousePosition(evt, canvas) {\r\n      let rect = canvas.getBoundingClientRect();\r\n      return {\r\n        x: evt.clientX - rect.left,\r\n        y: evt.clientY - rect.top\r\n      };\r\n    }\r\n    \r\n    filterTemperature(temperature) {\r\n      const temp = temperature\r\n        .map((obj) => obj.temp)\r\n        .filter((el, index) => index % 2 == 0);\r\n    \r\n      return temp;\r\n    }\r\n    \r\n    temperatureToPixel(temp){\r\n      const pixelTemp = temp.map(el => this.axisXposition - this.blocks(el));\r\n      console.log(pixelTemp);\r\n      return pixelTemp;\r\n    }\r\n    \r\n    hoursToPixel(hours) {\r\n      const hourrs = hours.map(el => this.blocks(el));\r\n      return hourrs;\r\n    }\r\n    \r\n    createTempObj(hour, temp, hourOfTemp, tempInHour){\r\n      const tempPointCoords = [];\r\n      for (let i = 0; i < temp.length; i++){\r\n        tempPointCoords.push({\r\n          x: hour[i],\r\n          y: temp[i],\r\n          xmin: Math.abs(hour[i]) - 3,\r\n          xmax: Math.abs(hour[i]) + 3,\r\n          ymin: Math.abs(temp[i]) - 3,\r\n          ymax: Math.abs(temp[i]) + 3,\r\n          hourTemp: {\r\n            hour: hourOfTemp[i],\r\n            temp: tempInHour[i]\r\n          },\r\n    \r\n        })\r\n      }\r\n      return tempPointCoords;\r\n    }\r\n    \r\n    drawPoint(ctx, coords = {}, radius, color = \'white\') {\r\n      const mouseCoordinate = coords;\r\n      ctx.strokeStyle = color;\r\n      ctx.beginPath();\r\n      ctx.moveTo(mouseCoordinate.x, mouseCoordinate.y);\r\n      ctx.arc(mouseCoordinate.x, mouseCoordinate.y, radius, 0, Math.PI * 2, true);\r\n      ctx.fillStyle = color;\r\n      ctx.fill();\r\n      ctx.stroke();\r\n    }\r\n    \r\n    addEvent(pointTemp, mouseCoordinate, drawPoint, canvas, state, tooltip, ctx, condition) {\r\n      return function(e) {\r\n          const mouseCoords = mouseCoordinate(e, canvas);\r\n          let boools = pointTemp.filter(el => {\r\n          const a = el.xmin <= mouseCoords.x;\r\n          const b = mouseCoords.x <= el.xmax;\r\n          const c = el.ymin <= mouseCoords.y;\r\n          const d = mouseCoords.y <= el.ymax;\r\n          return (a && b && c && d)\r\n        })\r\n\r\n        if(boools.length) {\r\n          drawPoint(ctx, boools[0], 1);\r\n          state = {...boools[0]};\r\n          condition = true;\r\n          if (canvas.width - (state.x + 5) <= 80){\r\n            tooltip.style.left = `${state.x - 85}px`\r\n            tooltip.style.top = `${state.y - 35}px`;\r\n            \r\n          }\r\n          else {\r\n            tooltip.style.left = `${state.x + 5}px`;\r\n            tooltip.style.top = `${state.y - 35}px`;\r\n          }\r\n          tooltip.style.display = \'flex\';\r\n          tooltip.innerHTML = `Time: ${state.hourTemp.hour}:00, Temp: ${state.hourTemp.temp}Â°C`;\r\n        } \r\n        else if(!boools.length) {\r\n          drawPoint(ctx, state, 3, "#FFE74A");\r\n          condition = false;\r\n          state = {};\r\n          tooltip.style.display = \'none\';\r\n          boools = [];\r\n        } \r\n      \r\n      }\r\n    }\r\n    addPopUp(tempPoint) {\r\n      const addEvent1 = this.addEvent(tempPoint, this.getMousePosition, this.drawPoint, this.canvas, this.state, this.tooltip, this.ctx, this.condition);\r\n      this.canvas.addEventListener(\'mousemove\', addEvent1);\r\n      this.button.addEventListener("click", e => {\r\n        this.canvas.removeEventListener(\'mousemove\', addEvent1);\r\n      });\r\n      \r\n      \r\n    }\r\n\r\n    removePopUp(tempPoint) {\r\n      const addEvent1 = this.addEvent(tempPoint, this.getMousePosition, this.drawPoint, this.canvas, this.state, this.tooltip, this.ctx, this.condition);\r\n      this.canvas.removeEventListener(\'mousemove\', addEvent1);\r\n    }\r\n\r\n    async chart() {\r\n      const hourOfWeather = this.mapAndFilter(this.weatherByHour.map((obj) => obj.dt));\r\n      let temperature = this.filterTemperature(this.weatherByHour);\r\n      const averageTemp = this.getAverageTemp(temperature);\r\n      this.setAxisXposition(averageTemp);\r\n      \r\n      const temperatureCoords = this.temperatureToChartCoords(temperature);\r\n      \r\n      const tempPixels = this.temperatureToPixel(temperatureCoords);\r\n      const hoursPixels = this.hoursToPixel(this.getHoursCoords());\r\n      \r\n      const tempPoints = this.createTempObj(hoursPixels, tempPixels, hourOfWeather, temperature);\r\n    \r\n      this.canvasDimensions();\r\n      this.drawGrid();\r\n      this.drawAxis(hourOfWeather, averageTemp);\r\n      await this.waitForGrid(500);\r\n      this.drawChart(temperatureCoords)\r\n      this.addPopUp(tempPoints);\r\n      this.removePopUp(tempPoints);\r\n    }\r\n  \r\n  }\n// CONCATENATED MODULE: ./src/js/weekForecastClass.js\nclass WeekForecast {\r\n  constructor(weekForecastData) {\r\n    this.weekData = weekForecastData;\r\n    this.weatherForecastContainer = document.getElementsByClassName(\r\n      "weatherForecast--js"\r\n    );\r\n    this.weatherForecastContainer = this.weatherForecastContainer[0];\r\n  }\r\n\r\n  sliceWeekDataArray() {\r\n    this.weekData = this.weekData.slice(1, 8);\r\n  }\r\n\r\n  getTimestampToTime(timestamp) {\r\n    const time = new Date(timestamp * 1000);\r\n    return time.getDay();\r\n  }\r\n\r\n  getNameOfWeek(number) {\r\n    switch (number) {\r\n      case 0:\r\n        return "Sun";\r\n        break;\r\n      case 1:\r\n        return "Mon";\r\n        break;\r\n      case 2:\r\n        return "Tue";\r\n        break;\r\n      case 3:\r\n        return "Wed";\r\n        break;\r\n      case 4:\r\n        return "Thur";\r\n        break;\r\n      case 5:\r\n        return "Fri";\r\n        break;\r\n      case 6:\r\n        return "Sat";\r\n        break;\r\n    }\r\n  }\r\n  getWeatherParameters() {\r\n    this.weekData = this.weekData.map((el) => {\r\n      return {\r\n        day: this.getNameOfWeek(this.getTimestampToTime(el.dt)),\r\n        temp: el.temp.day,\r\n        weather: el.weather[0].main,\r\n      };\r\n    });\r\n    console.log(this.weekData);\r\n  }\r\n\r\n  putWeatherIntoSection() {\r\n    this.weatherForecastContainer.innerHTML = "";\r\n    this.weekData.forEach((el) => {\r\n      this.weatherForecastContainer.innerHTML += `<div class="weatherForecast__day weatherForecast__day--js"><img class="weatherForecast__dayElement" src=\'assets/img/weatherIcons/${this.weatherIcon(\r\n        el.weather\r\n      )}\' alt=\'\'></img><div class="weatherForecast__dayElement"><p>${\r\n        el.day\r\n      }<br>${el.temp}</p></div></div>`;\r\n    });\r\n  }\r\n\r\n  addWeatherForecast() {\r\n    this.sliceWeekDataArray();\r\n    this.getWeatherParameters();\r\n    this.putWeatherIntoSection();\r\n  }\r\n\r\n  weatherIcon(weather) {\r\n    let currentDate = new Date();\r\n    currentDate = currentDate.getHours();\r\n    switch (weather) {\r\n      case "thunderstorm":\r\n        return "Storm.svg";\r\n        break;\r\n      case "Drizzle":\r\n        return "Drizzle.svg";\r\n        break;\r\n      case "Rain":\r\n        return "Rain.svg";\r\n        break;\r\n      case "Snow":\r\n        return "Snowflake.svg";\r\n        break;\r\n      case "Atmosphere":\r\n        return "Fog.svg";\r\n        break;\r\n      case "Clear":\r\n        if (currentDate <= 20) {\r\n          return "Sun.svg";\r\n          break;\r\n        } else {\r\n          return "Moon.svg";\r\n          break;\r\n        }\r\n      case "Clouds":\r\n        return "Clouds.svg";\r\n        break;\r\n    }\r\n  }\r\n}\r\n\n// CONCATENATED MODULE: ./src/js/main.js\n\r\n\r\n\r\n\r\n// service worker registration - remove if you\'re not going to use it\r\n\r\nif ("serviceWorker" in navigator) {\r\n  window.addEventListener("load", function () {\r\n    navigator.serviceWorker.register("serviceworker.js").then(\r\n      function (registration) {\r\n        // Registration was successful\r\n        console.log(\r\n          "ServiceWorker registration successful with scope: ",\r\n          registration.scope\r\n        );\r\n      },\r\n      function (err) {\r\n        // registration failed :(\r\n        console.log("ServiceWorker registration failed: ", err);\r\n      }\r\n    );\r\n  });\r\n}\r\n\r\n// place your code below\r\nconst apiKey = "53c5e97675c8d3d8da07e56aec5a3a22";\r\nconst axisXposition = 280; // X axis is on 280px Canvas Height;\r\nlet classStatus = false;\r\n\r\n(function () {\r\n  let lastTime = 0;\r\n  let vendors = ["ms", "moz", "webkit", "o"];\r\n  for (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n    window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];\r\n    window.cancelAnimationFrame =\r\n      window[vendors[x] + "CancelAnimationFrame"] ||\r\n      window[vendors[x] + "CancelRequestAnimationFrame"];\r\n  }\r\n\r\n  if (!window.requestAnimationFrame)\r\n    window.requestAnimationFrame = function (callback, element) {\r\n      let currTime = new Date().getTime();\r\n      let timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n      let id = window.setTimeout(function () {\r\n        callback(currTime + timeToCall);\r\n      }, timeToCall);\r\n      lastTime = currTime + timeToCall;\r\n      return id;\r\n    };\r\n\r\n  if (!window.cancelAnimationFrame)\r\n    window.cancelAnimationFrame = function (id) {\r\n      clearTimeout(id);\r\n    };\r\n})();\r\n\r\nfunction error(err) {\r\n  console.warn(`ERROR(${err.code}): ${err.message}`);\r\n}\r\n\r\nconst options = {\r\n  enableHighAccuracy: true,\r\n  timeout: 5000,\r\n  maximumAge: 0,\r\n};\r\n\r\nfunction main_location() {\r\n  return new Promise((resolve, reject) =>\r\n    navigator.geolocation.getCurrentPosition(resolve, error)\r\n  );\r\n}\r\n\r\nasync function getLocation(location) {\r\n  let position = location;\r\n  let weatherByPosition;\r\n  let weatherByHour;\r\n  let nextSevenDays;\r\n  if (typeof position === "object") {\r\n    position = await position.coords;\r\n    const { latitude, longitude } = position;\r\n\r\n    weatherByPosition = await fetch(\r\n      `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}&units=metric&lang=pl`\r\n    );\r\n    weatherByPosition = await weatherByPosition.json();\r\n\r\n    weatherByHour = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${latitude}&lon=${longitude}&\r\n    exclude=hourly&appid=${apiKey}&units=metric`);\r\n    weatherByHour = await weatherByHour.json();\r\n    weatherByHour = weatherByHour.hourly;\r\n\r\n    nextSevenDays = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${latitude}&lon=${longitude}&\r\n    exclude=daily&appid=${apiKey}&units=metric`);\r\n    nextSevenDays = await nextSevenDays.json();\r\n    nextSevenDays = nextSevenDays.daily;\r\n  } else {\r\n    weatherByPosition = await fetch(\r\n      `https://api.openweathermap.org/data/2.5/weather?q=${position}&appid=${apiKey}&units=metric`\r\n    );\r\n    weatherByPosition = await weatherByPosition.json();\r\n\r\n    const coords = weatherByPosition.coord;\r\n    console.log(coords);\r\n    weatherByHour = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${coords.lat}&lon=${coords.lon}&\r\n    exclude=hourly&appid=${apiKey}&units=metric`);\r\n    weatherByHour = await weatherByHour.json();\r\n\r\n    weatherByHour = weatherByHour.hourly;\r\n\r\n    nextSevenDays = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${coords.lat}&lon=${coords.lon}&\r\n    exclude=daily&appid=${apiKey}&units=metric`);\r\n    nextSevenDays = await nextSevenDays.json();\r\n    nextSevenDays = nextSevenDays.daily;\r\n  }\r\n\r\n  const weatherData = new WeatherInformation(weatherByPosition);\r\n  weatherData.setWeatherInformation();\r\n  const chart = new Chart(weatherByHour, axisXposition);\r\n  chart.chart();\r\n  const forecastForWeek = new WeekForecast(nextSevenDays);\r\n  forecastForWeek.addWeatherForecast();\r\n  \r\n}\r\n\r\nconst localization = document.getElementsByClassName(\r\n  "header__geolocalization--buttonJS"\r\n)[0];\r\nconst searchButton = document.getElementsByClassName(\r\n  "header__search--buttonJS"\r\n)[0];\r\nconst inputField = document.getElementsByClassName(\r\n  "header__search--inputJS"\r\n)[0];\r\n\r\nlocalization.addEventListener("click", async () => {\r\n  const locations = await main_location();\r\n  await getLocation(locations);\r\n  if (!classStatus) {\r\n    replaceClasses();\r\n    classStatus = true;\r\n  }\r\n});\r\n\r\nsearchButton.addEventListener("click", async () => {\r\n  if (!inputField.value) {\r\n    alert("please type your city name");\r\n  } else if (inputField.value) {\r\n    try {\r\n      await getLocation(inputField.value);\r\n\r\n      if (!classStatus) {\r\n        replaceClasses();\r\n        classStatus = true;\r\n      }\r\n    } catch (error) {\r\n      alert(`Could not find the city \'${inputField.value}`);\r\n    }\r\n  }\r\n});\r\n\r\ninputField.addEventListener("keyup", (event) => {\r\n  if (event.keyCode === 13) {\r\n    searchButton.click();\r\n  }\r\n})\r\n\r\nfunction replaceClasses() {\r\n  const header = document.getElementsByClassName("header--firstLoad")[0];\r\n  const main = document.getElementsByClassName("main__container--firstLoad")[0];\r\n  const footer = document.getElementsByClassName("footer--firstLoad")[0];\r\n\r\n  header.classList.replace("header--firstLoad", "header");\r\n  main.classList.replace("main__container--firstLoad", "main__container");\r\n  footer.classList.replace("footer--firstLoad", "footer__image");\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvd2VhdGhlckluZm9ybWF0aW9uQ2xhc3MuanM/M2IxZiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY2hhcnRDbGFzcy5qcz8yMDJkIiwid2VicGFjazovLy8uL3NyYy9qcy93ZWVrRm9yZWNhc3RDbGFzcy5qcz8yMTU4Iiwid2VicGFjazovLy8uL3NyYy9qcy9tYWluLmpzPzkyOTEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxjQUFjLElBQUksYUFBYTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CLE1BQU07QUFDMUQ7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQSwwQkFBMEIscUJBQXFCO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGNBQWM7QUFDNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixlQUFlO0FBQzlDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxZQUFZO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RHTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVgsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FB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RUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLGFBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsd0NBQXdDLGlCQUFpQjtBQUN6RDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBXZWF0aGVySW5mb3JtYXRpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHdlYXRoZXJJbmZvKSB7XHJcbiAgICAodGhpcy5sb2NhdGlvbiA9IHdlYXRoZXJJbmZvLm5hbWUpLFxyXG4gICAgICAodGhpcy5jb3VudHJ5ID0gd2VhdGhlckluZm8uc3lzLmNvdW50cnkpO1xyXG4gICAgKHRoaXMuZGF0ZSA9IG5ldyBEYXRlKCkpLFxyXG4gICAgICAodGhpcy50ZW1wID0gd2VhdGhlckluZm8ubWFpbi50ZW1wKSxcclxuICAgICAgKHRoaXMuaWNvbk5hbWUgPSB3ZWF0aGVySW5mby53ZWF0aGVyWzBdLm1haW4pLFxyXG4gICAgICAodGhpcy5wcmVzc3VyZSA9IHdlYXRoZXJJbmZvLm1haW4ucHJlc3N1cmUpLFxyXG4gICAgICAodGhpcy5odW1pZGl0eSA9IHdlYXRoZXJJbmZvLm1haW4uaHVtaWRpdHkpLFxyXG4gICAgICAodGhpcy53aW5kU3BwZWQgPSB3ZWF0aGVySW5mby53aW5kLnNwZWVkKTtcclxuICB9XHJcblxyXG4gIHNldExvY2F0aW9uKCkge1xyXG4gICAgY29uc3QgbG9jYXRpb25JRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgICAgIFwiaGVhZFRleHRfX2xvY2F0aW9uLS1qc1wiXHJcbiAgICApWzBdO1xyXG4gICAgbG9jYXRpb25JRC5pbm5lckhUTUwgPSBgaW4gJHt0aGlzLmxvY2F0aW9ufSwgJHt0aGlzLmNvdW50cnl9YDtcclxuICB9XHJcbiAgc2V0RGF0ZSgpIHtcclxuICAgIGNvbnN0IGRhdGVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJoZWFkVGV4dF9fZGF0ZS0tanNcIilbMF07XHJcbiAgICBkYXRlSUQuaW5uZXJIVE1MID0gYFRvZGF5ICR7dGhpcy5kYXRlLmdldERhdGUoKX10aCwgJHt0aGlzLmRhdGUudG9Mb2NhbGVTdHJpbmcoXHJcbiAgICAgIFwiZW4tRU5cIixcclxuICAgICAgeyBtb250aDogXCJsb25nXCIgfVxyXG4gICAgKX1gO1xyXG4gIH1cclxuXHJcbiAgc2V0VGVtcCgpIHtcclxuICAgIGNvbnN0IHRlbXBJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJoZWFkVGV4dC0tZGVncmVlcy1qc1wiKVswXTtcclxuICAgIHRlbXBJRC5pbm5lckhUTUwgPSBgJHt0aGlzLnRlbXAudG9GaXhlZCgxKX0gwrBDYDtcclxuICB9XHJcblxyXG4gIHNldFByZXNzdXJlKCkge1xyXG4gICAgY29uc3QgcHJlc3N1cmVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgICAgIFwid2VhdGhlclRvZGF5X19wcmVzc3VyZS0tanNcIlxyXG4gICAgKVswXTtcclxuICAgIHByZXNzdXJlSUQuaW5uZXJIVE1MID0gYCR7dGhpcy5wcmVzc3VyZX0gaFBhYDtcclxuICB9XHJcblxyXG4gIHNldEh1bWlkaXR5KCkge1xyXG4gICAgY29uc3QgaHVtaWRpdHlJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgICAgIFwid2VhdGhlclRvZGF5X19odW1pZGl0eS0tanNcIlxyXG4gICAgKVswXTtcclxuICAgIGh1bWlkaXR5SUQuaW5uZXJIVE1MID0gYCR7dGhpcy5odW1pZGl0eX0gJWA7XHJcbiAgfVxyXG5cclxuICBzZXRXaW5kU3BlZWQoKSB7XHJcbiAgICBjb25zdCB3aW5kU3BlZWRJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgICAgIFwid2VhdGhlclRvZGF5X193aW5kU3BlZWQtLWpzXCJcclxuICAgIClbMF07XHJcbiAgICB3aW5kU3BlZWRJRC5pbm5lckhUTUwgPSBgJHt0aGlzLndpbmRTcHBlZH0gbS9zYDtcclxuICB9XHJcblxyXG4gIHNldFdlYXRoZXJJbmZvcm1hdGlvbigpIHtcclxuICAgIHRoaXMuc2V0TG9jYXRpb24oKTtcclxuICAgIHRoaXMuc2V0RGF0ZSgpO1xyXG4gICAgdGhpcy5zZXRUZW1wKCk7XHJcbiAgICB0aGlzLnNldFByZXNzdXJlKCk7XHJcbiAgICB0aGlzLnNldEh1bWlkaXR5KCk7XHJcbiAgICB0aGlzLnNldFdpbmRTcGVlZCgpO1xyXG4gIH1cclxuXHJcbiAgd2VhdGhlckljb24od2VhdGhlcikge1xyXG4gICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGN1cnJlbnREYXRlID0gY3VycmVudERhdGUuZ2V0SG91cnMoKTtcclxuICAgIHN3aXRjaCAod2VhdGhlcikge1xyXG4gICAgICBjYXNlIFwidGh1bmRlcnN0b3JtXCI6XHJcbiAgICAgICAgcmV0dXJuIFwic3Rvcm0uc3ZnXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJEcml6emxlXCI6XHJcbiAgICAgICAgcmV0dXJuIFwiRHJpenpsZS5zdmdcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlJhaW5cIjpcclxuICAgICAgICByZXR1cm4gXCJSYWluLnN2Z1wiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiU25vd1wiOlxyXG4gICAgICAgIHJldHVybiBcIlNub3dmbGFrZS5zdmdcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIkF0bW9zcGhlcmVcIjpcclxuICAgICAgICByZXR1cm4gXCJmb2cuc3ZnXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJDbGVhclwiOlxyXG4gICAgICAgIGlmIChjdXJyZW50RGF0ZSA8PSAyMCkge1xyXG4gICAgICAgICAgcmV0dXJuIFwic3VuLnN2Z1wiO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBcIm1vb24uc3ZnXCI7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgXCJDbG91ZHNcIjpcclxuICAgICAgICByZXR1cm4gXCJDbG91ZHMuc3ZnXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRJbWFnZSgpIHtcclxuICAgIGNvbnN0IGltYWdlSUQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwid2VhdGhlckltYWdlLS1qc1wiKVswXTtcclxuICAgIGNvbnN0IHdlYXRoZXJOYW1lID0gdGhpcy53ZWF0aGVySWNvbih0aGlzLmljb25OYW1lKTtcclxuICAgIGltYWdlSUQuc3JjID0gYGFzc2V0cy9pbWcvJHt3ZWF0aGVyTmFtZX1gO1xyXG4gIH1cclxuICByb3VuZFRlbXAodGVtcCkge1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQoKHRlbXAgKiAxMDApIC8gMTAwKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENoYXJ0IHtcclxuICAgIGNvbnN0cnVjdG9yKHdlYXRoZXJEYXRhLCBheGlzWHBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuYXhpc1hwb3NpdGlvbiA9IGF4aXNYcG9zaXRpb247XHJcbiAgICAgIHRoaXMud2VhdGhlckJ5SG91ciA9IHdlYXRoZXJEYXRhO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbiA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnN0YXRlID0ge307XHJcbiAgICAgIHRoaXMudG9vbHRpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGFydFRlbXBfX3Rvb2x0aXBcIilbMF07XHJcbiAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFydFRlbXBfX2NhbnZhc1wiKTtcclxuICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgIHRoaXMuYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImhlYWRlcl9fc2VhcmNoLS1idXR0b25KU1wiKVswXTtcclxuICAgIH1cclxuICBcclxuICAgIGNhbnZhc0RpbWVuc2lvbnMoKSB7XHJcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gNjYwO1xyXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSAzMDk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBibG9ja3MoY291bnQpIHtcclxuICAgICAgcmV0dXJuIGNvdW50ICogNDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldEF4aXNYcG9zaXRpb24oYXZlcmFnZVRlbXApIHtcclxuICAgICAgaWYgKGF2ZXJhZ2VUZW1wID4gMCAmJiBhdmVyYWdlVGVtcCA8IDE1KSB7XHJcbiAgICAgICAgdGhpcy5heGlzWHBvc2l0aW9uID0gdGhpcy5heGlzWHBvc2l0aW9uIC8gMiArIDIwO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGF2ZXJhZ2VUZW1wIDwgLTEwKSB7XHJcbiAgICAgICAgdGhpcy5heGlzWHBvc2l0aW9uID0gNDA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3R3JpZCgpIHtcclxuICAgICAgbGV0IGdyaWRYID0gNDA7XHJcbiAgICAgIGxldCBncmlkWSA9IDQwO1xyXG4gICAgICBjb25zdCBjZWxsU2l6ZSA9IDQwO1xyXG4gICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcImxpZ2h0Z3JleVwiO1xyXG4gICAgXHJcbiAgICAgIHdoaWxlIChncmlkWCA8PSB0aGlzLmNhbnZhcy53aWR0aCAtIDIwKSB7XHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKGdyaWRYLCAyMCk7XHJcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKGdyaWRYLCB0aGlzLmNhbnZhcy5oZWlnaHQgLSAyMCk7XHJcbiAgICAgICAgZ3JpZFggKz0gY2VsbFNpemU7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGdyaWRZIDw9IHRoaXMuY2FudmFzLmhlaWdodCAtIDIwKSB7XHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDIwLCBncmlkWSk7XHJcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMuY2FudmFzLndpZHRoIC0gMTAsIGdyaWRZKTtcclxuICAgICAgICBncmlkWSArPSBjZWxsU2l6ZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmN0eC5zdHJva2UoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXN5bmMgZHJhd0F4aXMoaG91cnMpIHtcclxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8odGhpcy5ibG9ja3MoMSksIHRoaXMuYmxvY2tzKDEgLyAyKSk7XHJcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMuYmxvY2tzKDEpLCB0aGlzLmJsb2Nrcyg3KSk7XHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKHRoaXMuYmxvY2tzKDEpLCB0aGlzLmF4aXNYcG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLmJsb2NrcygxNiksIHRoaXMuYXhpc1hwb3NpdGlvbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKHRoaXMuYmxvY2tzKDEpLCB0aGlzLmJsb2Nrcyg3KSk7XHJcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLmF4aXNYcG9zaXRpb24gPT09IDE2MCA/IC0xNSA6ICh0aGlzLmF4aXNYcG9zaXRpb24gPT09IDQwID8gLTMwIDogMCk7XHJcbiAgICAgICAgbGV0IHRleHRZID0gdGhpcy5ibG9ja3MoNyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNzsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLmN0eC5zdHJva2VUZXh0KHRleHQsIHRoaXMuYmxvY2tzKDEgLyAyKSwgdGV4dFkpO1xyXG4gICAgICAgICAgdGV4dFkgLT0gNDA7XHJcbiAgICAgICAgICB0ZXh0ICs9IDU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh0aGlzLmJsb2NrcygyKSwgdGhpcy5ibG9ja3MoNykpO1xyXG4gICAgICAgIGxldCB0ZXh0WCA9IHRoaXMuYmxvY2tzKDEuOSk7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMTU7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy5jdHguc3Ryb2tlVGV4dChob3Vyc1tpXSwgdGV4dFgsIHRoaXMuYmxvY2tzKDcuNSkpO1xyXG4gICAgICAgICAgdGV4dFggKz0gNDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG4gICAgICBcclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgXHJcblxyXG4gICAgfVxyXG4gICAgdGltZXN0YW1wVG9UaW1lKHN0YW1wKSB7XHJcbiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoc3RhbXAgKiAxMDAwKTtcclxuICAgICAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbWFwQW5kRmlsdGVyKHRlbXBBcnJheSkge1xyXG4gICAgICB0ZW1wQXJyYXkgPSB0ZW1wQXJyYXkubWFwKChlbCkgPT4gdGhpcy50aW1lc3RhbXBUb1RpbWUoZWwpKTtcclxuICAgICAgdGVtcEFycmF5ID0gdGVtcEFycmF5LmZpbHRlcigoZWwpID0+IGVsICUgMiA9PSAwKTtcclxuICAgICAgcmV0dXJuIHRlbXBBcnJheTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGVtcGVyYXR1cmVUb0NoYXJ0Q29vcmRzKHRlbXApe1xyXG4gICAgICBsZXQgdGVtcGVyYXR1cmUgPSB0ZW1wLm1hcCgoZWwpID0+IGVsIC8gNSk7XHJcbiAgICAgIHRlbXBlcmF0dXJlID0gdGVtcGVyYXR1cmUuc2xpY2UoMCwxNSk7XHJcbiAgICAgIHJldHVybiB0ZW1wZXJhdHVyZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0SG91cnNDb29yZHMoKSB7XHJcbiAgICAgIGxldCBob3VyT2ZUZW1wID0gWy4uLkFycmF5KDE3KS5rZXlzKCldXHJcbiAgICAgIGhvdXJPZlRlbXAgPSBob3VyT2ZUZW1wLnNsaWNlKDIsIDE3KTtcclxuICAgIFxyXG4gICAgICByZXR1cm4gaG91ck9mVGVtcDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0QXZlcmFnZVRlbXAodGVtcGVyYXR1cmUpIHtcclxuICAgICAgcmV0dXJuICh0ZW1wZXJhdHVyZS5yZWR1Y2UoKGEsYikgPT4gKGErYikpIC8gdGVtcGVyYXR1cmUubGVuZ3RoKS50b0ZpeGVkKDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdDaGFydCh0ZW1wZXJhdHVyZSkge1xyXG4gICAgICBjb25zdCB0ZW1wSG91cnMgPSB0aGlzLmdldEhvdXJzQ29vcmRzKCk7XHJcbiAgICAgIGxldCBpID0gMTtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuY3R4XHJcbiAgICAgIGNvbnN0IGJsb2NrID0gdGhpcy5ibG9ja3MuYmluZCh0aGlzKTtcclxuICAgICAgY29uc3QgYXhpc1hwb3NpdGlvbiA9IHRoaXMuYXhpc1hwb3NpdGlvbjtcclxuICAgICAgZnVuY3Rpb24gYW5pbWF0aW9uKCkge1xyXG4gICAgICAgIGlmIChpIDw9IHRlbXBlcmF0dXJlLmxlbmd0aCkge1xyXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjRkZFNzRBXCI7XHJcbiAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSAzO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oYmxvY2sodGVtcEhvdXJzW2ktMV0pLCBheGlzWHBvc2l0aW9uIC0gYmxvY2sodGVtcGVyYXR1cmVbaS0xXSkpO1xyXG4gICAgICAgIGNvbnRleHQuYXJjKGJsb2NrKHRlbXBIb3Vyc1tpLTFdKSwgYXhpc1hwb3NpdGlvbiAtIGJsb2NrKHRlbXBlcmF0dXJlW2ktMV0pLCAzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oYmxvY2sodGVtcEhvdXJzW2ldKSwgYXhpc1hwb3NpdGlvbiAtIGJsb2NrKHRlbXBlcmF0dXJlW2ldKSk7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICBpKys7XHJcbiAgICAgIH1cclxuICAgICAgYW5pbWF0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFzeW5jIHdhaXRGb3JHcmlkKG1zKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgbXMpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0TW91c2VQb3NpdGlvbihldnQsIGNhbnZhcykge1xyXG4gICAgICBsZXQgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBldnQuY2xpZW50WCAtIHJlY3QubGVmdCxcclxuICAgICAgICB5OiBldnQuY2xpZW50WSAtIHJlY3QudG9wXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZpbHRlclRlbXBlcmF0dXJlKHRlbXBlcmF0dXJlKSB7XHJcbiAgICAgIGNvbnN0IHRlbXAgPSB0ZW1wZXJhdHVyZVxyXG4gICAgICAgIC5tYXAoKG9iaikgPT4gb2JqLnRlbXApXHJcbiAgICAgICAgLmZpbHRlcigoZWwsIGluZGV4KSA9PiBpbmRleCAlIDIgPT0gMCk7XHJcbiAgICBcclxuICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRlbXBlcmF0dXJlVG9QaXhlbCh0ZW1wKXtcclxuICAgICAgY29uc3QgcGl4ZWxUZW1wID0gdGVtcC5tYXAoZWwgPT4gdGhpcy5heGlzWHBvc2l0aW9uIC0gdGhpcy5ibG9ja3MoZWwpKTtcclxuICAgICAgY29uc29sZS5sb2cocGl4ZWxUZW1wKTtcclxuICAgICAgcmV0dXJuIHBpeGVsVGVtcDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaG91cnNUb1BpeGVsKGhvdXJzKSB7XHJcbiAgICAgIGNvbnN0IGhvdXJycyA9IGhvdXJzLm1hcChlbCA9PiB0aGlzLmJsb2NrcyhlbCkpO1xyXG4gICAgICByZXR1cm4gaG91cnJzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjcmVhdGVUZW1wT2JqKGhvdXIsIHRlbXAsIGhvdXJPZlRlbXAsIHRlbXBJbkhvdXIpe1xyXG4gICAgICBjb25zdCB0ZW1wUG9pbnRDb29yZHMgPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICB0ZW1wUG9pbnRDb29yZHMucHVzaCh7XHJcbiAgICAgICAgICB4OiBob3VyW2ldLFxyXG4gICAgICAgICAgeTogdGVtcFtpXSxcclxuICAgICAgICAgIHhtaW46IE1hdGguYWJzKGhvdXJbaV0pIC0gMyxcclxuICAgICAgICAgIHhtYXg6IE1hdGguYWJzKGhvdXJbaV0pICsgMyxcclxuICAgICAgICAgIHltaW46IE1hdGguYWJzKHRlbXBbaV0pIC0gMyxcclxuICAgICAgICAgIHltYXg6IE1hdGguYWJzKHRlbXBbaV0pICsgMyxcclxuICAgICAgICAgIGhvdXJUZW1wOiB7XHJcbiAgICAgICAgICAgIGhvdXI6IGhvdXJPZlRlbXBbaV0sXHJcbiAgICAgICAgICAgIHRlbXA6IHRlbXBJbkhvdXJbaV1cclxuICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0ZW1wUG9pbnRDb29yZHM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGRyYXdQb2ludChjdHgsIGNvb3JkcyA9IHt9LCByYWRpdXMsIGNvbG9yID0gJ3doaXRlJykge1xyXG4gICAgICBjb25zdCBtb3VzZUNvb3JkaW5hdGUgPSBjb29yZHM7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5tb3ZlVG8obW91c2VDb29yZGluYXRlLngsIG1vdXNlQ29vcmRpbmF0ZS55KTtcclxuICAgICAgY3R4LmFyYyhtb3VzZUNvb3JkaW5hdGUueCwgbW91c2VDb29yZGluYXRlLnksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkRXZlbnQocG9pbnRUZW1wLCBtb3VzZUNvb3JkaW5hdGUsIGRyYXdQb2ludCwgY2FudmFzLCBzdGF0ZSwgdG9vbHRpcCwgY3R4LCBjb25kaXRpb24pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGNvbnN0IG1vdXNlQ29vcmRzID0gbW91c2VDb29yZGluYXRlKGUsIGNhbnZhcyk7XHJcbiAgICAgICAgICBsZXQgYm9vb2xzID0gcG9pbnRUZW1wLmZpbHRlcihlbCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBhID0gZWwueG1pbiA8PSBtb3VzZUNvb3Jkcy54O1xyXG4gICAgICAgICAgY29uc3QgYiA9IG1vdXNlQ29vcmRzLnggPD0gZWwueG1heDtcclxuICAgICAgICAgIGNvbnN0IGMgPSBlbC55bWluIDw9IG1vdXNlQ29vcmRzLnk7XHJcbiAgICAgICAgICBjb25zdCBkID0gbW91c2VDb29yZHMueSA8PSBlbC55bWF4O1xyXG4gICAgICAgICAgcmV0dXJuIChhICYmIGIgJiYgYyAmJiBkKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmKGJvb29scy5sZW5ndGgpIHtcclxuICAgICAgICAgIGRyYXdQb2ludChjdHgsIGJvb29sc1swXSwgMSk7XHJcbiAgICAgICAgICBzdGF0ZSA9IHsuLi5ib29vbHNbMF19O1xyXG4gICAgICAgICAgY29uZGl0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgIGlmIChjYW52YXMud2lkdGggLSAoc3RhdGUueCArIDUpIDw9IDgwKXtcclxuICAgICAgICAgICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7c3RhdGUueCAtIDg1fXB4YFxyXG4gICAgICAgICAgICB0b29sdGlwLnN0eWxlLnRvcCA9IGAke3N0YXRlLnkgLSAzNX1weGA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9IGAke3N0YXRlLnggKyA1fXB4YDtcclxuICAgICAgICAgICAgdG9vbHRpcC5zdHlsZS50b3AgPSBgJHtzdGF0ZS55IC0gMzV9cHhgO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgICAgdG9vbHRpcC5pbm5lckhUTUwgPSBgVGltZTogJHtzdGF0ZS5ob3VyVGVtcC5ob3VyfTowMCwgVGVtcDogJHtzdGF0ZS5ob3VyVGVtcC50ZW1wfcKwQ2A7XHJcbiAgICAgICAgfSBcclxuICAgICAgICBlbHNlIGlmKCFib29vbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBkcmF3UG9pbnQoY3R4LCBzdGF0ZSwgMywgXCIjRkZFNzRBXCIpO1xyXG4gICAgICAgICAgY29uZGl0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICBzdGF0ZSA9IHt9O1xyXG4gICAgICAgICAgdG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgYm9vb2xzID0gW107XHJcbiAgICAgICAgfSBcclxuICAgICAgXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZFBvcFVwKHRlbXBQb2ludCkge1xyXG4gICAgICBjb25zdCBhZGRFdmVudDEgPSB0aGlzLmFkZEV2ZW50KHRlbXBQb2ludCwgdGhpcy5nZXRNb3VzZVBvc2l0aW9uLCB0aGlzLmRyYXdQb2ludCwgdGhpcy5jYW52YXMsIHRoaXMuc3RhdGUsIHRoaXMudG9vbHRpcCwgdGhpcy5jdHgsIHRoaXMuY29uZGl0aW9uKTtcclxuICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgYWRkRXZlbnQxKTtcclxuICAgICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGFkZEV2ZW50MSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUG9wVXAodGVtcFBvaW50KSB7XHJcbiAgICAgIGNvbnN0IGFkZEV2ZW50MSA9IHRoaXMuYWRkRXZlbnQodGVtcFBvaW50LCB0aGlzLmdldE1vdXNlUG9zaXRpb24sIHRoaXMuZHJhd1BvaW50LCB0aGlzLmNhbnZhcywgdGhpcy5zdGF0ZSwgdGhpcy50b29sdGlwLCB0aGlzLmN0eCwgdGhpcy5jb25kaXRpb24pO1xyXG4gICAgICB0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBhZGRFdmVudDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNoYXJ0KCkge1xyXG4gICAgICBjb25zdCBob3VyT2ZXZWF0aGVyID0gdGhpcy5tYXBBbmRGaWx0ZXIodGhpcy53ZWF0aGVyQnlIb3VyLm1hcCgob2JqKSA9PiBvYmouZHQpKTtcclxuICAgICAgbGV0IHRlbXBlcmF0dXJlID0gdGhpcy5maWx0ZXJUZW1wZXJhdHVyZSh0aGlzLndlYXRoZXJCeUhvdXIpO1xyXG4gICAgICBjb25zdCBhdmVyYWdlVGVtcCA9IHRoaXMuZ2V0QXZlcmFnZVRlbXAodGVtcGVyYXR1cmUpO1xyXG4gICAgICB0aGlzLnNldEF4aXNYcG9zaXRpb24oYXZlcmFnZVRlbXApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgdGVtcGVyYXR1cmVDb29yZHMgPSB0aGlzLnRlbXBlcmF0dXJlVG9DaGFydENvb3Jkcyh0ZW1wZXJhdHVyZSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB0ZW1wUGl4ZWxzID0gdGhpcy50ZW1wZXJhdHVyZVRvUGl4ZWwodGVtcGVyYXR1cmVDb29yZHMpO1xyXG4gICAgICBjb25zdCBob3Vyc1BpeGVscyA9IHRoaXMuaG91cnNUb1BpeGVsKHRoaXMuZ2V0SG91cnNDb29yZHMoKSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB0ZW1wUG9pbnRzID0gdGhpcy5jcmVhdGVUZW1wT2JqKGhvdXJzUGl4ZWxzLCB0ZW1wUGl4ZWxzLCBob3VyT2ZXZWF0aGVyLCB0ZW1wZXJhdHVyZSk7XHJcbiAgICBcclxuICAgICAgdGhpcy5jYW52YXNEaW1lbnNpb25zKCk7XHJcbiAgICAgIHRoaXMuZHJhd0dyaWQoKTtcclxuICAgICAgdGhpcy5kcmF3QXhpcyhob3VyT2ZXZWF0aGVyLCBhdmVyYWdlVGVtcCk7XHJcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckdyaWQoNTAwKTtcclxuICAgICAgdGhpcy5kcmF3Q2hhcnQodGVtcGVyYXR1cmVDb29yZHMpXHJcbiAgICAgIHRoaXMuYWRkUG9wVXAodGVtcFBvaW50cyk7XHJcbiAgICAgIHRoaXMucmVtb3ZlUG9wVXAodGVtcFBvaW50cyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgfSIsImV4cG9ydCBjbGFzcyBXZWVrRm9yZWNhc3Qge1xyXG4gIGNvbnN0cnVjdG9yKHdlZWtGb3JlY2FzdERhdGEpIHtcclxuICAgIHRoaXMud2Vla0RhdGEgPSB3ZWVrRm9yZWNhc3REYXRhO1xyXG4gICAgdGhpcy53ZWF0aGVyRm9yZWNhc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICBcIndlYXRoZXJGb3JlY2FzdC0tanNcIlxyXG4gICAgKTtcclxuICAgIHRoaXMud2VhdGhlckZvcmVjYXN0Q29udGFpbmVyID0gdGhpcy53ZWF0aGVyRm9yZWNhc3RDb250YWluZXJbMF07XHJcbiAgfVxyXG5cclxuICBzbGljZVdlZWtEYXRhQXJyYXkoKSB7XHJcbiAgICB0aGlzLndlZWtEYXRhID0gdGhpcy53ZWVrRGF0YS5zbGljZSgxLCA4KTtcclxuICB9XHJcblxyXG4gIGdldFRpbWVzdGFtcFRvVGltZSh0aW1lc3RhbXApIHtcclxuICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKiAxMDAwKTtcclxuICAgIHJldHVybiB0aW1lLmdldERheSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmFtZU9mV2VlayhudW1iZXIpIHtcclxuICAgIHN3aXRjaCAobnVtYmVyKSB7XHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICByZXR1cm4gXCJTdW5cIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIHJldHVybiBcIk1vblwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgICAgcmV0dXJuIFwiVHVlXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICByZXR1cm4gXCJXZWRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA0OlxyXG4gICAgICAgIHJldHVybiBcIlRodXJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA1OlxyXG4gICAgICAgIHJldHVybiBcIkZyaVwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDY6XHJcbiAgICAgICAgcmV0dXJuIFwiU2F0XCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldFdlYXRoZXJQYXJhbWV0ZXJzKCkge1xyXG4gICAgdGhpcy53ZWVrRGF0YSA9IHRoaXMud2Vla0RhdGEubWFwKChlbCkgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGRheTogdGhpcy5nZXROYW1lT2ZXZWVrKHRoaXMuZ2V0VGltZXN0YW1wVG9UaW1lKGVsLmR0KSksXHJcbiAgICAgICAgdGVtcDogZWwudGVtcC5kYXksXHJcbiAgICAgICAgd2VhdGhlcjogZWwud2VhdGhlclswXS5tYWluLFxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLndlZWtEYXRhKTtcclxuICB9XHJcblxyXG4gIHB1dFdlYXRoZXJJbnRvU2VjdGlvbigpIHtcclxuICAgIHRoaXMud2VhdGhlckZvcmVjYXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB0aGlzLndlZWtEYXRhLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgIHRoaXMud2VhdGhlckZvcmVjYXN0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz1cIndlYXRoZXJGb3JlY2FzdF9fZGF5IHdlYXRoZXJGb3JlY2FzdF9fZGF5LS1qc1wiPjxpbWcgY2xhc3M9XCJ3ZWF0aGVyRm9yZWNhc3RfX2RheUVsZW1lbnRcIiBzcmM9J2Fzc2V0cy9pbWcvd2VhdGhlckljb25zLyR7dGhpcy53ZWF0aGVySWNvbihcclxuICAgICAgICBlbC53ZWF0aGVyXHJcbiAgICAgICl9JyBhbHQ9Jyc+PC9pbWc+PGRpdiBjbGFzcz1cIndlYXRoZXJGb3JlY2FzdF9fZGF5RWxlbWVudFwiPjxwPiR7XHJcbiAgICAgICAgZWwuZGF5XHJcbiAgICAgIH08YnI+JHtlbC50ZW1wfTwvcD48L2Rpdj48L2Rpdj5gO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRXZWF0aGVyRm9yZWNhc3QoKSB7XHJcbiAgICB0aGlzLnNsaWNlV2Vla0RhdGFBcnJheSgpO1xyXG4gICAgdGhpcy5nZXRXZWF0aGVyUGFyYW1ldGVycygpO1xyXG4gICAgdGhpcy5wdXRXZWF0aGVySW50b1NlY3Rpb24oKTtcclxuICB9XHJcblxyXG4gIHdlYXRoZXJJY29uKHdlYXRoZXIpIHtcclxuICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlLmdldEhvdXJzKCk7XHJcbiAgICBzd2l0Y2ggKHdlYXRoZXIpIHtcclxuICAgICAgY2FzZSBcInRodW5kZXJzdG9ybVwiOlxyXG4gICAgICAgIHJldHVybiBcIlN0b3JtLnN2Z1wiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiRHJpenpsZVwiOlxyXG4gICAgICAgIHJldHVybiBcIkRyaXp6bGUuc3ZnXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJSYWluXCI6XHJcbiAgICAgICAgcmV0dXJuIFwiUmFpbi5zdmdcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlNub3dcIjpcclxuICAgICAgICByZXR1cm4gXCJTbm93Zmxha2Uuc3ZnXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJBdG1vc3BoZXJlXCI6XHJcbiAgICAgICAgcmV0dXJuIFwiRm9nLnN2Z1wiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQ2xlYXJcIjpcclxuICAgICAgICBpZiAoY3VycmVudERhdGUgPD0gMjApIHtcclxuICAgICAgICAgIHJldHVybiBcIlN1bi5zdmdcIjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gXCJNb29uLnN2Z1wiO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlIFwiQ2xvdWRzXCI6XHJcbiAgICAgICAgcmV0dXJuIFwiQ2xvdWRzLnN2Z1wiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IHsgV2VhdGhlckluZm9ybWF0aW9uIH0gZnJvbSBcIi4vd2VhdGhlckluZm9ybWF0aW9uQ2xhc3MuanNcIjtcclxuaW1wb3J0IHsgQ2hhcnQgfSBmcm9tIFwiLi9jaGFydENsYXNzLmpzXCI7XHJcbmltcG9ydCB7IFdlZWtGb3JlY2FzdCB9IGZyb20gXCIuL3dlZWtGb3JlY2FzdENsYXNzLmpzXCI7XHJcbi8vIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiAtIHJlbW92ZSBpZiB5b3UncmUgbm90IGdvaW5nIHRvIHVzZSBpdFxyXG5cclxuaWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihcInNlcnZpY2V3b3JrZXIuanNcIikudGhlbihcclxuICAgICAgZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgIC8vIFJlZ2lzdHJhdGlvbiB3YXMgc3VjY2Vzc2Z1bFxyXG4gICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgXCJTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6IFwiLFxyXG4gICAgICAgICAgcmVnaXN0cmF0aW9uLnNjb3BlXHJcbiAgICAgICAgKTtcclxuICAgICAgfSxcclxuICAgICAgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIC8vIHJlZ2lzdHJhdGlvbiBmYWlsZWQgOihcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogXCIsIGVycik7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIHBsYWNlIHlvdXIgY29kZSBiZWxvd1xyXG5jb25zdCBhcGlLZXkgPSBcIjUzYzVlOTc2NzVjOGQzZDhkYTA3ZTU2YWVjNWEzYTIyXCI7XHJcbmNvbnN0IGF4aXNYcG9zaXRpb24gPSAyODA7IC8vIFggYXhpcyBpcyBvbiAyODBweCBDYW52YXMgSGVpZ2h0O1xyXG5sZXQgY2xhc3NTdGF0dXMgPSBmYWxzZTtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgbGV0IGxhc3RUaW1lID0gMDtcclxuICBsZXQgdmVuZG9ycyA9IFtcIm1zXCIsIFwibW96XCIsIFwid2Via2l0XCIsIFwib1wiXTtcclxuICBmb3IgKGxldCB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArIFwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xyXG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID1cclxuICAgICAgd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdIHx8XHJcbiAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XHJcbiAgfVxyXG5cclxuICBpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBlbGVtZW50KSB7XHJcbiAgICAgIGxldCBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICBsZXQgdGltZVRvQ2FsbCA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnJUaW1lIC0gbGFzdFRpbWUpKTtcclxuICAgICAgbGV0IGlkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7XHJcbiAgICAgIH0sIHRpbWVUb0NhbGwpO1xyXG4gICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcclxuICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfTtcclxuXHJcbiAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXHJcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcclxuICAgIH07XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBlcnJvcihlcnIpIHtcclxuICBjb25zb2xlLndhcm4oYEVSUk9SKCR7ZXJyLmNvZGV9KTogJHtlcnIubWVzc2FnZX1gKTtcclxufVxyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsXHJcbiAgdGltZW91dDogNTAwMCxcclxuICBtYXhpbXVtQWdlOiAwLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gbG9jYXRpb24oKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHJlc29sdmUsIGVycm9yKVxyXG4gICk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldExvY2F0aW9uKGxvY2F0aW9uKSB7XHJcbiAgbGV0IHBvc2l0aW9uID0gbG9jYXRpb247XHJcbiAgbGV0IHdlYXRoZXJCeVBvc2l0aW9uO1xyXG4gIGxldCB3ZWF0aGVyQnlIb3VyO1xyXG4gIGxldCBuZXh0U2V2ZW5EYXlzO1xyXG4gIGlmICh0eXBlb2YgcG9zaXRpb24gPT09IFwib2JqZWN0XCIpIHtcclxuICAgIHBvc2l0aW9uID0gYXdhaXQgcG9zaXRpb24uY29vcmRzO1xyXG4gICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSBwb3NpdGlvbjtcclxuXHJcbiAgICB3ZWF0aGVyQnlQb3NpdGlvbiA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/bGF0PSR7bGF0aXR1ZGV9Jmxvbj0ke2xvbmdpdHVkZX0mYXBwaWQ9JHthcGlLZXl9JnVuaXRzPW1ldHJpYyZsYW5nPXBsYFxyXG4gICAgKTtcclxuICAgIHdlYXRoZXJCeVBvc2l0aW9uID0gYXdhaXQgd2VhdGhlckJ5UG9zaXRpb24uanNvbigpO1xyXG5cclxuICAgIHdlYXRoZXJCeUhvdXIgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L29uZWNhbGw/bGF0PSR7bGF0aXR1ZGV9Jmxvbj0ke2xvbmdpdHVkZX0mXHJcbiAgICBleGNsdWRlPWhvdXJseSZhcHBpZD0ke2FwaUtleX0mdW5pdHM9bWV0cmljYCk7XHJcbiAgICB3ZWF0aGVyQnlIb3VyID0gYXdhaXQgd2VhdGhlckJ5SG91ci5qc29uKCk7XHJcbiAgICB3ZWF0aGVyQnlIb3VyID0gd2VhdGhlckJ5SG91ci5ob3VybHk7XHJcblxyXG4gICAgbmV4dFNldmVuRGF5cyA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvb25lY2FsbD9sYXQ9JHtsYXRpdHVkZX0mbG9uPSR7bG9uZ2l0dWRlfSZcclxuICAgIGV4Y2x1ZGU9ZGFpbHkmYXBwaWQ9JHthcGlLZXl9JnVuaXRzPW1ldHJpY2ApO1xyXG4gICAgbmV4dFNldmVuRGF5cyA9IGF3YWl0IG5leHRTZXZlbkRheXMuanNvbigpO1xyXG4gICAgbmV4dFNldmVuRGF5cyA9IG5leHRTZXZlbkRheXMuZGFpbHk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHdlYXRoZXJCeVBvc2l0aW9uID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9xPSR7cG9zaXRpb259JmFwcGlkPSR7YXBpS2V5fSZ1bml0cz1tZXRyaWNgXHJcbiAgICApO1xyXG4gICAgd2VhdGhlckJ5UG9zaXRpb24gPSBhd2FpdCB3ZWF0aGVyQnlQb3NpdGlvbi5qc29uKCk7XHJcblxyXG4gICAgY29uc3QgY29vcmRzID0gd2VhdGhlckJ5UG9zaXRpb24uY29vcmQ7XHJcbiAgICBjb25zb2xlLmxvZyhjb29yZHMpO1xyXG4gICAgd2VhdGhlckJ5SG91ciA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvb25lY2FsbD9sYXQ9JHtjb29yZHMubGF0fSZsb249JHtjb29yZHMubG9ufSZcclxuICAgIGV4Y2x1ZGU9aG91cmx5JmFwcGlkPSR7YXBpS2V5fSZ1bml0cz1tZXRyaWNgKTtcclxuICAgIHdlYXRoZXJCeUhvdXIgPSBhd2FpdCB3ZWF0aGVyQnlIb3VyLmpzb24oKTtcclxuXHJcbiAgICB3ZWF0aGVyQnlIb3VyID0gd2VhdGhlckJ5SG91ci5ob3VybHk7XHJcblxyXG4gICAgbmV4dFNldmVuRGF5cyA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvb25lY2FsbD9sYXQ9JHtjb29yZHMubGF0fSZsb249JHtjb29yZHMubG9ufSZcclxuICAgIGV4Y2x1ZGU9ZGFpbHkmYXBwaWQ9JHthcGlLZXl9JnVuaXRzPW1ldHJpY2ApO1xyXG4gICAgbmV4dFNldmVuRGF5cyA9IGF3YWl0IG5leHRTZXZlbkRheXMuanNvbigpO1xyXG4gICAgbmV4dFNldmVuRGF5cyA9IG5leHRTZXZlbkRheXMuZGFpbHk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB3ZWF0aGVyRGF0YSA9IG5ldyBXZWF0aGVySW5mb3JtYXRpb24od2VhdGhlckJ5UG9zaXRpb24pO1xyXG4gIHdlYXRoZXJEYXRhLnNldFdlYXRoZXJJbmZvcm1hdGlvbigpO1xyXG4gIGNvbnN0IGNoYXJ0ID0gbmV3IENoYXJ0KHdlYXRoZXJCeUhvdXIsIGF4aXNYcG9zaXRpb24pO1xyXG4gIGNoYXJ0LmNoYXJ0KCk7XHJcbiAgY29uc3QgZm9yZWNhc3RGb3JXZWVrID0gbmV3IFdlZWtGb3JlY2FzdChuZXh0U2V2ZW5EYXlzKTtcclxuICBmb3JlY2FzdEZvcldlZWsuYWRkV2VhdGhlckZvcmVjYXN0KCk7XHJcbiAgXHJcbn1cclxuXHJcbmNvbnN0IGxvY2FsaXphdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgXCJoZWFkZXJfX2dlb2xvY2FsaXphdGlvbi0tYnV0dG9uSlNcIlxyXG4pWzBdO1xyXG5jb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gIFwiaGVhZGVyX19zZWFyY2gtLWJ1dHRvbkpTXCJcclxuKVswXTtcclxuY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgXCJoZWFkZXJfX3NlYXJjaC0taW5wdXRKU1wiXHJcbilbMF07XHJcblxyXG5sb2NhbGl6YXRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICBjb25zdCBsb2NhdGlvbnMgPSBhd2FpdCBsb2NhdGlvbigpO1xyXG4gIGF3YWl0IGdldExvY2F0aW9uKGxvY2F0aW9ucyk7XHJcbiAgaWYgKCFjbGFzc1N0YXR1cykge1xyXG4gICAgcmVwbGFjZUNsYXNzZXMoKTtcclxuICAgIGNsYXNzU3RhdHVzID0gdHJ1ZTtcclxuICB9XHJcbn0pO1xyXG5cclxuc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgaWYgKCFpbnB1dEZpZWxkLnZhbHVlKSB7XHJcbiAgICBhbGVydChcInBsZWFzZSB0eXBlIHlvdXIgY2l0eSBuYW1lXCIpO1xyXG4gIH0gZWxzZSBpZiAoaW5wdXRGaWVsZC52YWx1ZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZ2V0TG9jYXRpb24oaW5wdXRGaWVsZC52YWx1ZSk7XHJcblxyXG4gICAgICBpZiAoIWNsYXNzU3RhdHVzKSB7XHJcbiAgICAgICAgcmVwbGFjZUNsYXNzZXMoKTtcclxuICAgICAgICBjbGFzc1N0YXR1cyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGFsZXJ0KGBDb3VsZCBub3QgZmluZCB0aGUgY2l0eSAnJHtpbnB1dEZpZWxkLnZhbHVlfWApO1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG5pbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZXZlbnQpID0+IHtcclxuICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgIHNlYXJjaEJ1dHRvbi5jbGljaygpO1xyXG4gIH1cclxufSlcclxuXHJcbmZ1bmN0aW9uIHJlcGxhY2VDbGFzc2VzKCkge1xyXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJoZWFkZXItLWZpcnN0TG9hZFwiKVswXTtcclxuICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1haW5fX2NvbnRhaW5lci0tZmlyc3RMb2FkXCIpWzBdO1xyXG4gIGNvbnN0IGZvb3RlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJmb290ZXItLWZpcnN0TG9hZFwiKVswXTtcclxuXHJcbiAgaGVhZGVyLmNsYXNzTGlzdC5yZXBsYWNlKFwiaGVhZGVyLS1maXJzdExvYWRcIiwgXCJoZWFkZXJcIik7XHJcbiAgbWFpbi5jbGFzc0xpc3QucmVwbGFjZShcIm1haW5fX2NvbnRhaW5lci0tZmlyc3RMb2FkXCIsIFwibWFpbl9fY29udGFpbmVyXCIpO1xyXG4gIGZvb3Rlci5jbGFzc0xpc3QucmVwbGFjZShcImZvb3Rlci0tZmlyc3RMb2FkXCIsIFwiZm9vdGVyX19pbWFnZVwiKTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')}]);